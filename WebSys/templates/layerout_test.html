<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>DeepPacket demo</title>

    <link rel="stylesheet" type="text/css" href="/static/css/main.css">
    <link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css">

    <script src="/static/js/bootstrap.min.js"></script>
    <script src="https://cdn.staticfile.org/jquery/2.2.4/jquery.min.js"></script>
    <script src="/static/js/echarts-4.7.0.min.js"></script>
</head>
<body>
    <div class="container-fluid">
        <div class="row header">
            <div class="col-1">
                <img class="logo" src="/static/img/nxp_logo.png"/>
            </div>
            <div class="col-11 title-text">
                <h4>DeepPacket demo</h4>
                <p>Solution for encrypted traffic classification</p>
            </div>
        </div>
        <div class="row">
            <div class="col-4 columns" id="column1">
                <div id="pkt_processed_fig"></div>
            </div>  
            <div class="col-4 columns" id="column2">
                <div id="class_details_fig"></div>
                            </div>  
            <div class="col-4 columns" id="column3">
                <div id="performance_fig"></div>
                <div id="statistic_table">
                    <table class="table">
                        <tbody>
                            <tr>
                                <td>packets count: </td>
                                <td>3421</td>
                            </tr>
                            <tr>
                                <td>flow count:</td>
                                <td>231</td>
                            </tr>
                            <tr>
                                <td>xxxxx:</td>
                                <td>11111</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-2"></div>
            <div class="col-8 columns" id="column4">
                <div class="flow-table">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>src_ip:port</th>
                                <th>dst_ip:port</th>
                                <th>protocol</th>
                                <th>service</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>10.193.102.90:63050</td>
                                <td>58.220.95.15:443</td>
                                <td class="text-info">TCP</td>
                                <td>m365</td>
                            </tr>
                            <tr>
                                <td>10.193.102.90:63050</td>
                                <td>58.220.95.15:443</td>
                                <td>TCP</td>
                                <td>m365</td>
                            </tr>
                            <tr>
                                <td>10.193.102.90:63050</td>
                                <td>58.220.95.15:443</td>
                                <td>TCP</td>
                                <td>m365</td>
                            </tr>
                            <tr>
                                <td>10.193.102.90:63050</td>
                                <td>58.220.95.15:443</td>
                                <td>TCP</td>
                                <td>m365</td>
                            </tr>
                            <tr>
                                <td>10.193.102.90:63050</td>
                                <td>58.220.95.15:443</td>
                                <td>TCP</td>
                                <td>m365</td>
                            </tr>
                            <tr>
                                <td>10.193.102.90:63050</td>
                                <td>58.220.95.15:443</td>
                                <td>TCP</td>
                                <td>m365</td>
                            </tr>
                            <tr>
                                <td>10.193.102.90:63050</td>
                                <td>58.220.95.15:443</td>
                                <td>TCP</td>
                                <td>m365</td>
                            </tr>
                            <tr>
                                <td>10.193.102.90:63050</td>
                                <td>58.220.95.15:443</td>
                                <td>TCP</td>
                                <td>m365</td>
                            </tr>
                            <tr>
                                <td>10.193.102.90:63050</td>
                                <td>58.220.95.15:443</td>
                                <td>TCP</td>
                                <td>m365</td>
                            </tr>
                            <tr>
                                <td>10.193.102.90:63050</td>
                                <td>58.220.95.15:443</td>
                                <td>TCP</td>
                                <td>m365</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>  
            <div class="col-2"></div>
        </div>
    </div>
    

    <script type="text/javascript">
        // Draw packets processed bar chart
        var tsList = ["10:33:00", "10:33:10", "10:33:20", "10:33:30"];
        var pktList = [11, 23, 34, 12];

        // var base = +new Date(2014, 9, 3);
        // var oneDay = 24 * 3600 * 1000;
        // var date = [];

        // var data = [Math.random() * 150];
        // var now = new Date(base);

        // function addData(shift) {
        //     now = [now.getFullYear(), now.getMonth() + 1, now.getDate()].join('/');
        //     date.push(now);
        //     data.push((Math.random() - 0.4) * 10 + data[data.length - 1]);

        //     if (shift) {
        //         date.shift();
        //         data.shift();
        //     }

        //     now = new Date(+new Date(now) + oneDay);
        // }

        // for (var i = 1; i < 100; i++) {
        //     addData();
        // }

        var pktProChart = echarts.init(document.getElementById('pkt_processed_fig'));
        var pktOpt = {
            title: {
                text: "Networking packets"
            },
            xAxis: {
                type: "category",
                boundaryGap: false,
                data: tsList
            },
            yAxis: {
                boundaryGap: [0, '50%'],
                type: "value"
            },
            series: [
                {
                    name: "packets",
                    type: "line",
                    smooth: true,
                    symbol: "none",
                    stack: "a",
                    areaStyle: {
                        normal: {}
                    },
                    data: pktList
                }
            ]
        };
        pktProChart.setOption(pktOpt);

        // Draw performance bar chart
        var perfBarChart = echarts.init(document.getElementById('performance_fig'));
        var perOpt = {
            title: {
                text: 'Performance'
            },
            tooltip: {},
            legend: {
                data:['time (ms)']
            },
            xAxis: {
                type: 'value',
                boundaryGap: [0, 0.1]
            },
            yAxis: {
                type: 'category',
                data: ['inference', 'warmup']
            },
            series: [{
                name: 'time',
                type: 'bar',
                data: [5, 20]
            }]
        };
        perfBarChart.setOption(perOpt);

        // Draw classes rate pie chart.
        var classRateChart = echarts.init(document.getElementById("class_details_fig"));
        var clsOpt = {
            title: {
                text: "Classes details"
            },
            series: {
                type: "pie",
                label: {
                    show: true,
                    position: "outside",
                    formatter: '{b}: {d}%'
                },
                radius: "55%",
                data: [
                    {value: 235, name: "email"},
                    {value: 123, name: "m365"},
                    {value: 432, name: "streamming"},
                    {value: 122, name: "webpage"}
                ]
            }
            
        };
        classRateChart.setOption(clsOpt);
    </script>
</body>

